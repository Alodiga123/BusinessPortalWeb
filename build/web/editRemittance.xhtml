<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="RemittanceEditDlg" widgetVar="RemittanceEditDialog" modal="true" resizable="false" appendTo="@(body)" header="Editar Remesa">
            <h:form id="RemittanceEditForm">
                <h:panelGroup id="display">
                     <p:scrollPanel style="width:850px;height:700px"   rendered="#{not empty dtListRemittanceController.selectedRemittance}" >
                         <div align="center">  
                             <p:panelGrid styleClass="nba-grid">
                                 <f:facet name="header">
                                     <p:row>
                                         <p:column >Numero de Remesa</p:column>
                                         <p:column >Clave de Pago</p:column>
                                         <p:column >Correlativo</p:column>
                                         <p:column>Fecha de Creacion</p:column>
                                     </p:row>

                                 </f:facet>

                                 <p:column>
                                     <h:outputText value="#{dtListRemittanceController.selectedRemittance.remittanceNumber}" />
                                 </p:column>

                                 <p:column>
                                     <h:outputText value="#{dtListRemittanceController.selectedRemittance.paymentKey}" />
                                 </p:column>

                                 <p:column>
                                     <h:outputText value="#{dtListRemittanceController.selectedRemittance.correlative}" />
                                 </p:column>

                                 <p:column>
                                     <h:outputText value="#{dtListRemittanceController.selectedRemittance.creationDate}" />
                                 </p:column>


                             </p:panelGrid>

                         </div>
                        <div class="ui-g-12 ui-lg-6">

                            <p:panelGrid  columns="2" rendered="#{not empty dtListRemittanceController.selectedRemittance}" columnClasses="label,value" layout="grid" style="margin-top:10px">
                                <f:facet name="header">
                                    <p:row>
                                        <p:column>Remitente</p:column>
                                    </p:row>
                                </f:facet>


                                <h:outputText value="Nombre" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.remittent.person.firstName} + #{dtListRemittanceController.selectedRemittance.remittent.person.lastName}" />

                                <h:outputText value="Pais" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.addressRemittent.country.name}" />

                                <h:outputText value="Estado" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.addressRemittent.state.name}" />

                                <h:outputText value="Ciudad" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.addressRemittent.city.name}" />

                                <h:outputText value="Direccion" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.addressRemittent.address}" />

                                <h:outputText value="Telefono" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.remittent.person.phoneNumber}" />

                            </p:panelGrid>
                        </div>
                        <div class="ui-g-12 ui-lg-6">
                            <p:panelGrid   columns="2" rendered="#{not empty dtListRemittanceController.selectedRemittance}" columnClasses="label,value" layout="grid" style="margin-top:10px">
                                <f:facet name="header">
                                    <p:row>
                                        <p:column>Destinatario</p:column>
                                    </p:row>
                                </f:facet>
                                <h:outputText value="Nombre" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.receiver.person.firstName} + #{dtListRemittanceController.selectedRemittance.remittent.person.lastName}" />

                                <h:outputText value="Pais" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.addressReciever.country.name}" />

                                <h:outputText value="Estado" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.addressReciever.state.name}" />

                                <h:outputText value="Ciudad" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.addressReciever.city.name}" />

                                <h:outputText value="Direccion" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.addressReciever.address}" />

                                <h:outputText value="Telefono" />
                                <h:outputText value="#{dtListRemittanceController.selectedRemittance.receiver.person.phoneNumber}" />

                            </p:panelGrid>
                        </div>
                        <div class="ui-g-12 ui-lg-6" align="center">
                             <p:panelGrid rendered="#{not empty dtListRemittanceController.selectedRemittance}">
                              <p:row>
                                  <p:column styleClass="firstcolumn">Dinero Enviado</p:column>
                                  <p:column style="text-align: right">#{dtListRemittanceController.selectedRemittance.amountOrigin}</p:column>
                              </p:row>
                              <p:row>
                                 <p:column styleClass="firstcolumn">Tipo de Cambio</p:column>
                                 <p:column style="text-align: right">#{dtListRemittanceController.selectedRemittance.exchangeRate.amount}</p:column>
                              </p:row>
                              <p:row>
                                 <p:column styleClass="firstcolumn">Monto a Entregar</p:column>
                                 <p:column style="text-align: right">#{dtListRemittanceController.selectedRemittance.amountDestiny}</p:column>
                              </p:row>
                               <p:row>
                                 <p:column styleClass="firstcolumn">Total a Pagar</p:column>
                                 <p:column style="text-align: right">#{dtListRemittanceController.selectedRemittance.totalAmount}</p:column>
                              </p:row>
                          </p:panelGrid>
                        </div>
                        <div class="ui-g-12 ui-lg-6" align="center">
                             <p:panelGrid  rendered="#{not empty dtListRemittanceController.selectedRemittance}">
                              <p:row>
                                  <p:column styleClass="firstcolumn">Detalle de envio</p:column>
                                  <p:column style="text-align: right"/>
                              </p:row>
                              <p:row>
                                 <p:column styleClass="firstcolumn">Informacion de Montos</p:column>
                                 <p:column style="text-align: right"/>
                              </p:row>
                              <p:row>
                                 <p:column styleClass="firstcolumn">Monto Enviado del Remitente</p:column>
                                 <p:column style="text-align: right">#{dtListRemittanceController.amountRemittance}</p:column>
                              </p:row>
                               <p:row>
                                 <p:column styleClass="firstcolumn">Monto Recibido del Destinatario</p:column>
                                 <p:column style="text-align: right">#{dtListRemittanceController.amountReciever}</p:column>
                              </p:row>
                          </p:panelGrid>
                        </div>
                        <div class="ui-g-12">
                            <p:dataTable var="ofac"  rendered="#{not empty dtListRemittanceController.selectedRemittance}" style="margin-top:20px">
                                    <f:facet name="header">
                                        <p:row>
                                            <p:column>Informacion OFAC</p:column>
                                        </p:row>
                                    </f:facet>
                                    <p:column headerText="Nombre">
                                        <h:outputText value="" />
                                    </p:column>
                                    <p:column headerText="Fuente de Informacion">
                                        <h:outputText value="" />
                                    </p:column>
                                    <p:column headerText="Categoria">
                                        <h:outputText value="" />
                                    </p:column>
                                    <p:column headerText="Fecha de Nacimiento">
                                        <h:outputText value="" />
                                    </p:column>
                                    <p:column headerText="Pais">
                                        <h:outputText value="" />
                                    </p:column>
                                </p:dataTable>
                            </div>
                        <div class="ui-g-12">
                             <p:dataTable var="remittance1" value="#{dtListRemittanceController.remittancesByRemittent}" rendered="#{not empty dtListRemittanceController.selectedRemittance}" style="margin-top:20px">
                                    <f:facet name="header">
                                        <p:row>
                                            <p:column>Actividad Reciente del Remitente</p:column>
                                        </p:row>
                                    </f:facet>
                                    <p:column headerText="Fecha">
                                        <h:outputText value="#{remittance1.creationDate}" />
                                    </p:column>
                                    <p:column headerText="Codigo">
                                        <h:outputText value="#{remittance1.remittanceNumber}" />
                                    </p:column>
                                    <p:column headerText="Destinatario">
                                        <h:outputText value="#{remittance1.receiver.person.firstName}" />
                                    </p:column>
                                    <p:column headerText="Monto">
                                        <h:outputText value="#{remittance1.amountOrigin}" />
                                    </p:column>
                                    <p:column headerText="Estatus">
                                        <h:outputText value="#{remittance1.status.name}" />
                                    </p:column>
                                    <p:column headerText="Pais">
                                        <h:outputText value="#{emittance1.addressReciever.country.name}" />
                                    </p:column>
                                </p:dataTable>
                        </div>
                        <div class="ui-g-12">
                            
                            <p:dataTable var="remittance2" value="#{dtListRemittanceController.remittancesByReceiver}" rendered="#{not empty dtListRemittanceController.selectedRemittance}" style="margin-top:20px">
                                    <f:facet name="header">
                                        <p:row>
                                            <p:column>Actividad Reciente del Destinatario</p:column>
                                        </p:row>
                                    </f:facet>
                                    <p:column headerText="Fecha">
                                        <h:outputText value="#{remittance2.creationDate}" />
                                    </p:column>
                                    <p:column headerText="Codigo">
                                        <h:outputText value="#{remittance2.remittanceNumber}" />
                                    </p:column>
                                    <p:column headerText="Remitente">
                                        <h:outputText value="#{remittance2.receiver.person.firstName}" />
                                    </p:column>
                                    <p:column headerText="Monto">
                                        <h:outputText value="#{remittance2.amountOrigin}" />
                                    </p:column>
                                    <p:column headerText="Estatus">
                                        <h:outputText value="#{remittance2.status.name}" />
                                    </p:column>
                                </p:dataTable>
                        </div>
                          <div class="ui-g-12">
                            
                          <p:dataTable var="status" value="#{dtListRemittanceController.remittanceStatuses}" rendered="#{not empty dtListRemittanceController.selectedRemittance}" style="margin-top:20px"
                                       scrollable="true" scrollWidth="815">
                                    <f:facet name="header">
                                        <p:row>
                                            <p:column>Estatus de la Remesa</p:column>
                                        </p:row>
                                    </f:facet>
                                    <p:column headerText="Estatus" style="width:110px">
                                        <h:outputText value="#{status.remittenceStatus.name}" />
                                    </p:column>
                                    <p:column headerText="Fecha de Inicio" style="width:150px">
                                        <h:outputText value="#{status.beginningDate}" />
                                    </p:column>
                                    <p:column headerText="Fecha de Cambio" style="width:150px">
                                        <h:outputText value="#{status.endingDate}" />
                                    </p:column>
                                    <p:column headerText="Usuario">
                                        <h:outputText value="#{status.user.firstName} + #{status.user.lastName}" style="width:150px"/>
                                    </p:column>
                                    <p:column headerText="Comentario">
                                        <h:outputText value="#{status.comments}" style="width:300px"/>
                                    </p:column>
                                </p:dataTable>
                        </div>

                        <div class="ui-g-12" align="center">
                            <p:panelGrid columns="1" layout="grid" style="margin-top:10px">
                                <p:commandButton type="button" value="Comentarios" style="width: 100%"/>
                                <p:inputTextarea id="comments" value="#{dtListRemittanceController.comments}" required="true" rows="5" cols="50"  style="margin-top:10px"/>
                            </p:panelGrid>
                        </div>
                         
                    </p:scrollPanel>
                    <div class="ui-g-12" align="center">
                    <p:commandButton value="Autorizar" title="Autorizar" 
                                     update="display,:formRemittance:remittanceTable"
                                     actionListener="#{dtListRemittanceController.authorize}"
                                     styleClass="icon-insert icon" rendered="#{dtListRemittanceController.activeAuthorize}">
                    </p:commandButton>
                    <p:commandButton value="Anular" title="Anular" 
                                     update="display,:formRemittance:remittanceTable"
                                     actionListener="#{dtListRemittanceController.cancel}"
                                     styleClass="icon-insert icon" rendered="#{dtListRemittanceController.activeCancel}">
                    </p:commandButton>
                    <p:commandButton value="Cancelar" onclick="RemittanceEditDialog.hide()"/>
                    </div>
                </h:panelGroup>
            </h:form>
        </p:dialog>

    </ui:composition>
</html>
